(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{64094:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invited-attendee/technical-check",function(){return t(23803)}])},61783:function(n,e,t){"use strict";t.d(e,{N:function(){return c},O:function(){return a}});var r=t(85893),i=t(67294),o=t(34929),c=(0,i.createContext)(null),a=function(n){var e=n.children,t=(0,i.useState)(""),a=t[0],u=t[1],s=(0,i.useState)(null),l=s[0],f=s[1],d=(0,i.useState)(null),h=d[0],v=d[1],m=(0,i.useCallback)((function(n){try{var e=new o.SyncClient(n);window.syncClient=e,u(n),f(e)}catch(t){throw new Error(t)}}),[]);return(0,i.useEffect)((function(){l&&l.stream("OnDemandStream").then((function(n){v(n)}))}),[l]),(0,r.jsx)(c.Provider,{value:{syncToken:a,connect:m,syncClient:l,onDemandStream:h},children:e})}},855:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(67294),i=t(48847),o=t(1438),c=t(83454);function a(){var n,e=(0,r.useState)(o.DF),t=e[0],a=(e[1],{bandwidthProfile:{video:{mode:t.bandwidthProfileMode,dominantSpeakerPriority:t.dominantSpeakerPriority,trackSwitchOffMode:t.trackSwitchOffMode,contentPreferencesMode:t.contentPreferencesMode,clientTrackSwitchOffControl:t.clientTrackSwitchOffControl}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(t.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==t.roomType&&"go"!==t.roomType}],environment:c.env.REACT_APP_TWILIO_ENVIRONMENT});return i.tq&&(null===a||void 0===a||null===(n=a.bandwidthProfile)||void 0===n?void 0:n.video)&&(a.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===c.env.REACT_APP_TWILIO_ENVIRONMENT&&(a.wsServer="wss://us2.vss.dev.twilio.com/signaling"),(0,i.po)(a)}},30708:function(n,e,t){"use strict";var r=t(85893);e.Z=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(n){var t=n.children;return e.reduceRight((function(n,e){return(0,r.jsx)(e,{children:n})}),t)}}},69623:function(n,e,t){"use strict";var r=t(85893),i=t(11163),o=t(67294),c=t(51582),a=t(8225),u=t(61783),s=t(50784),l=t(855),f=t(15428),d=(0,t(30708).Z)((function(n){var e=(0,c.R)(),t=e.visit,a=e.user,u=(0,f.Z)(),s=u.getAudioAndVideoTracks,l=u.localTracks,d=u.room,h=(0,o.useState)(),v=h[0],m=h[1];return(0,o.useEffect)((function(){v||d||s().catch((function(n){console.log("Error acquiring local media:"),console.dir(n),m(n),i.default.push("/patient/video/no-av-permission")}))}),[s,v]),t&&a&&l&&l.length>1&&(0,r.jsx)(r.Fragment,{children:n.children})}),a.a,u.O);e.Z=function(n){var e=(0,l.Z)();return(0,r.jsx)(c.KX,{children:(0,r.jsx)(s.Z,{options:e,onError:function(n){console.log("catchErrorAndRedirect",n),i.default.push("/patient/visit-survey/")},children:(0,r.jsx)(d,{children:n.children})})})}},73870:function(n,e,t){"use strict";t.d(e,{c:function(){return h}});var r=t(85893),i=t(67294),o=t(53352),c=t(15428),a=t(97811),u=t(23074),s=t(90961);function l(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function f(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],c=!0,a=!1;try{for(t=t.call(n);!(c=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);c=!0);}catch(u){a=!0,i=u}finally{try{c||null==t.return||t.return()}finally{if(a)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return l(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(n){var e=n.containerClass,t=(0,c.Z)().localTracks,o=t.find((function(n){return"audio"===n.kind})),a=t.find((function(n){return"video"===n.kind})),l=(0,i.useState)(!1),d=l[0],h=l[1],v=(0,i.useState)(!1),m=v[0],p=v[1],y=f((0,s.P)(),2),x=y[0],k=y[1];return(0,i.useEffect)((function(){a&&(m?a.disable():a.enable())}),[m]),(0,i.useEffect)((function(){o&&(d?o.disable():o.enable())}),[d]),(0,r.jsxs)("div",{className:e,children:[k&&(0,r.jsx)(u.z,{className:"my-2",icon:"flip_camera_ios",iconType:"outline",variant:u.W.tertiary,onClick:x}),(0,r.jsx)(u.z,{className:"my-2",icon:m?"videocam_off":"videocam",iconType:"outline",variant:u.W.tertiary,onClick:function(){return p(!m)}}),(0,r.jsx)(u.z,{className:"my-2",icon:d?"mic_off":"mic",iconType:"outline",variant:u.W.tertiary,onClick:function(){return h(!d)}})]})},h=function(n){var e=n.videoImage,t=(0,c.Z)().localTracks,i=t.find((function(n){return"audio"===n.kind})),u=t.find((function(n){return"video"===n.kind}));return(0,r.jsxs)("div",{className:"flex mt-4 mb-1",children:[(0,r.jsx)(d,{containerClass:"flex flex-col justify-center px-1"}),(0,r.jsx)("div",{className:"flex-grow px-1",style:{width:"187px",height:"250px"},children:u?(0,r.jsx)(o.Z,{track:u,isLocal:!0}):(0,r.jsx)("img",{src:e,alt:"Video"})}),i&&(0,r.jsx)(a.Z,{track:i})]})}},23803:function(n,e,t){"use strict";t.r(e);var r=t(85893),i=t(67294),o=t(23074),c=t(9783),a=t(31199),u=t(73870),s=t(69623),l=t(36539),f=t(11163),d=t(15428),h=t(51582),v=function(){var n=(0,h.R)(),e=n.visit,t=n.user,s=(0,d.Z)().getAudioAndVideoTracks,v=(0,i.useState)(),m=v[0],p=v[1],y=(0,f.useRouter)(),x=(0,i.useState)(!1),k=x[0],g=x[1];function j(n,e){l.G.checkRoom(n,e.roomName).then((function(t){t.roomAvailable?g(!0):j(n,e)}))}return(0,i.useEffect)((function(){m||s().catch((function(n){console.log("Error acquiring local media:"),console.dir(n),p(n)}))}),[s,m]),(0,i.useEffect)((function(){t&&e&&j(t,e)}),[y,e,t]),(0,r.jsx)(a.Ar,{children:(0,r.jsxs)("div",{className:"my-4 flex flex-col items-center justify-center",children:[(0,r.jsx)(c.X,{children:"Invited to Appointment"}),(0,r.jsx)("div",{className:"mb-2 text-secondary",children:e.ehrProvider.name}),(0,r.jsx)(u.c,{videoImage:"/invited-attendee.svg"}),(0,r.jsx)(o.z,{className:"my-2 px-8",disabled:!k,onClick:function(){k&&y.push("/patient/video/")},children:"Continue to Visit"})]})})};v.Layout=s.Z,e.default=v},36539:function(n,e,t){"use strict";t.d(e,{G:function(){return s}});var r=t(34051),i=t.n(r),o=t(43820);function c(n,e,t,r,i,o,c){try{var a=n[o](c),u=a.value}catch(s){return void t(s)}a.done?e(u):Promise.resolve(u).then(r,i)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){c(o,r,i,a,u,"next",n)}function u(n){c(o,r,i,a,u,"throw",n)}a(void 0)}))}}function u(){return(u=a(i().mark((function n(e,t,r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(o.X.get(o.X.visits.recording),{method:"POST",body:JSON.stringify({room_sid:t,action:r}),headers:{authorization:"Bearer ".concat(e.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(n){return n.json()}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var s={checkRoom:function(n,e){return fetch(o.X.get(o.X.visits.patientRoomToken),{method:"POST",body:JSON.stringify({room_name:e}),headers:{authorization:"Bearer ".concat(n.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(n){return n.json()})).then((function(n){return n}))},createRoom:function(n,e){return fetch(o.X.get(o.X.visits.providerRoomToken),{method:"POST",body:JSON.stringify({room_name:e}),headers:{authorization:"Bearer ".concat(n.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(n){return n.json()})).then((function(n){return n}))},toggleRecording:function(n,e,t){return u.apply(this,arguments)}}}},function(n){n.O(0,[816,221,592,20,283,855,419,199,774,888,179],(function(){return e=64094,n(n.s=e);var e}));var e=n.O();_N_E=e}]);