(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{3670:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/dashboard",function(){return t(28067)}])},61783:function(e,n,t){"use strict";t.d(n,{N:function(){return c},O:function(){return o}});var r=t(85893),i=t(67294),s=t(34929),c=(0,i.createContext)(null),o=function(e){var n=e.children,t=(0,i.useState)(""),o=t[0],a=t[1],u=(0,i.useState)(null),l=u[0],d=u[1],f=(0,i.useState)(null),v=f[0],h=f[1],m=(0,i.useCallback)((function(e){try{var n=new s.SyncClient(e);window.syncClient=n,a(e),d(n)}catch(t){throw new Error(t)}}),[]);return(0,i.useEffect)((function(){l&&l.stream("OnDemandStream").then((function(e){h(e)}))}),[l]),(0,r.jsx)(c.Provider,{value:{syncToken:o,connect:m,syncClient:l,onDemandStream:v},children:n})}},36255:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(67294),i=t(61783);function s(){var e=(0,r.useContext)(i.N);if(!e)throw new Error("useSyncContext must be used within SyncProvider");return e}},855:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(48847),s=t(1438),c=t(83454);function o(){var e,n=(0,r.useState)(s.DF),t=n[0],o=(n[1],{bandwidthProfile:{video:{mode:t.bandwidthProfileMode,dominantSpeakerPriority:t.dominantSpeakerPriority,trackSwitchOffMode:t.trackSwitchOffMode,contentPreferencesMode:t.contentPreferencesMode,clientTrackSwitchOffControl:t.clientTrackSwitchOffControl}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(t.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==t.roomType&&"go"!==t.roomType}],environment:c.env.REACT_APP_TWILIO_ENVIRONMENT});return i.tq&&(null===o||void 0===o||null===(e=o.bandwidthProfile)||void 0===e?void 0:e.video)&&(o.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===c.env.REACT_APP_TWILIO_ENVIRONMENT&&(o.wsServer="wss://us2.vss.dev.twilio.com/signaling"),(0,i.po)(o)}},30708:function(e,n,t){"use strict";var r=t(85893);n.Z=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=e.children;return n.reduceRight((function(e,n){return(0,r.jsx)(n,{children:e})}),t)}}},31368:function(e,n,t){"use strict";var r=t(85893),i=t(67294),s=t(50784),c=t(855),o=t(51582),a=t(15428),u=t(8225),l=t(30708),d=t(61783),f=(0,l.Z)((function(e){var n=(0,o.R)().user,t=(0,a.Z)(),s=t.getAudioAndVideoTracks,c=t.localTracks,u=t.room,l=(0,i.useState)(),d=l[0],f=l[1];return(0,i.useEffect)((function(){d||u||s().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),f(e)}))}),[s,d]),n&&c&&c.length>1&&(0,r.jsx)(r.Fragment,{children:e.children})}),u.a,d.O);n.Z=function(e){var n=(0,c.Z)();return(0,r.jsx)(o.KX,{children:(0,r.jsx)(s.Z,{options:n,onError:function(e){return console.log(e)},children:(0,r.jsx)(f,{children:e.children})})})}},28067:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var r=t(34051),i=t.n(r),s=t(85893),c=t(67294),o=t(15428),a=t(79620),u=t(55484),l=t(31368),d=t(1107),f=t(51582),v=t(36255),h=t(43820),m=t(48357),p=t(39716),x=t(31237),w=t(28836);function y(e,n,t,r,i,s,c){try{var o=e[s](c),a=o.value}catch(u){return void t(u)}o.done?n(a):Promise.resolve(a).then(r,i)}var S=function(e){var n=e.className,t=(0,c.useState)([]),r=t[0],o=t[1],a=(0,c.useState)(0),u=a[0],l=a[1],v=(0,c.useState)(0),h=v[0],S=v[1],N=(0,c.useState)([]),j=N[0],g=N[1],k=(0,f.R)().user;return(0,c.useEffect)((function(){var e=function(){var e,n=(e=i().mark((function e(){var n,t,r,s,c,a,u,f,v,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=27;break}return e.next=3,d.Z.getSurveys(k.token);case 3:for(n=e.sent,o(n),t=0,r=0,s=new Set,c=!0,a=!1,u=void 0,e.prev=8,f=n[Symbol.iterator]();!(c=(v=f.next()).done);c=!0)(h=v.value).selectedIssues.map((function(e){s.add(e)})),"thumb_up"===h.selectedThumb?t++:r++;e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),a=!0,u=e.t0;case 16:e.prev=16,e.prev=17,c||null==f.return||f.return();case 19:if(e.prev=19,!a){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:g(Array.from(s)),l(t),S(r);case 27:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function c(e){y(s,r,i,c,o,"next",e)}function o(e){y(s,r,i,c,o,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[k]),(0,s.jsxs)(m.Z,{className:n,children:[(0,s.jsx)(w.f,{children:"Video Quality Surveys"}),(0,s.jsx)("div",{className:"",children:r.length&&void 0!==r?(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"justify-items-center grid gap-2 grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"text-primary mt-2",name:"thumb_up",outline:!0}),(0,s.jsx)("p",{className:"font-bold",children:u||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"text-primary mt-2",name:"thumb_down",outline:!0}),(0,s.jsx)("p",{className:"mx-2 font-bold",children:h||0})]})]}),j&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-primary text-lg",children:"Issues:"}),j.map((function(e,n){return(0,s.jsxs)("p",{className:"text-sm",children:["\u2022 ",e]},n)}))]})]}):(0,s.jsx)(x.Z,{})})]})},N=t(51502),j=t(1438);function g(e,n,t,r,i,s,c){try{var o=e[s](c),a=o.value}catch(u){return void t(u)}o.done?n(a):Promise.resolve(a).then(r,i)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function c(e){g(s,r,i,c,o,"next",e)}function o(e){g(s,r,i,c,o,"throw",e)}c(void 0)}))}}var b=function(){var e=(0,o.Z)().getAudioAndVideoTracks,n=(0,c.useState)(),t=n[0],r=n[1],l=(0,c.useState)(null),m=l[0],p=l[1],x=(0,c.useState)([]),w=x[0],y=x[1],g=(0,c.useState)([]),b=g[0],P=g[1],A=(0,c.useState)(),E=A[0],T=A[1],_=(0,c.useState)([]),C=_[0],Z=_[1],O=(0,c.useState)(!1),I=O[0],V=O[1],R=(0,c.useState)(!1),L=R[0],M=R[1],D=(0,f.R)().user,X=(0,v.Z)(),B=X.connect,Q=X.syncClient,W=X.onDemandStream,F=(0,c.useCallback)(k(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.Z.fetchAllTelehealthVisits(D).then(function(){var e=k(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e){return"WALKIN"===e.ehrAppointment.type})),r=n.filter((function(e){return"WALKIN"!==e.ehrAppointment.type})),P(t),y(r),p(t.length?t[0]:r[0]),console.log("ALLVISITS: ",n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),[D]);return(0,c.useEffect)((function(){var e=function(){var e=k(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.getFromStorage(j.dm);case 2:(n=e.sent)&&1===n&&M(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.useEffect)((function(){L||fetch(h.X.get(h.X.visits.token),{method:"POST",body:JSON.stringify({action:"SYNC"}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){var e=k(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:t=e.sent,B(t.token);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[L,B]),(0,c.useEffect)((function(){t||e().catch((function(e){console.dir(e),r(e)}))}),[e,t]),(0,c.useEffect)((function(){F(),d.Z.fetchAllContent(D).then((function(e){Z(e),T(e.find((function(e){e.provider_ids.some((function(e){return e===D.id}))})))}))}),[F,D]),(0,c.useEffect)((function(){var e=function(){var e=k(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(console.log("message received",n),n.message.data.patientSyncToken&&V(!0),F());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();if(Q&&W)return W.on("messagePublished",e),function(){W.off("messagePublished",e)}}),[F,W,Q,D]),(0,s.jsx)(a.Ar,{children:L?(0,s.jsx)("div",{children:(0,s.jsx)(a.xs,{visitNext:m})}):(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(u.r,{className:"my-2",visitNext:m}),(0,s.jsx)(a.Lb,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.bR,{className:"my-2",onDemandQueue:b,visitQueue:w,isNewVisit:I,setIsNewVisit:V}),(0,s.jsx)(a.B2,{className:"my-2",contentAssigned:E,contentAvailable:C}),(0,s.jsx)(S,{className:"my-2"})]}),(0,s.jsx)("div",{className:"order-first lg:order-last",children:(0,s.jsx)(a.xs,{})})]})})};b.Layout=l.Z;var P=b}},function(e){e.O(0,[816,221,132,592,20,846,855,419,9,774,888,179],(function(){return n=3670,e(e.s=n);var n}));var n=e.O();_N_E=n}]);